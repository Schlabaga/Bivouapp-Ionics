<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/explore"></ion-back-button>
    </ion-buttons>
    <ion-title>Publier un spot</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="publish-container">
    <!-- Formulaire avec FormGroup -->
    <form [formGroup]="spotForm" (ngSubmit)="onSubmit()">

      <!-- Titre -->
      <ion-item>
        <ion-label position="stacked">Titre *</ion-label>
        <ion-input
          type="text"
          formControlName="title"
          placeholder="Ajouter un titre">
        </ion-input>
      </ion-item>

      <!-- Description -->
      <ion-item>
        <ion-label position="stacked">Description *</ion-label>
        <ion-textarea
          formControlName="description"
          placeholder="Ajouter une description..."
          rows="4">
        </ion-textarea>
      </ion-item>

      <!-- Note (étoiles) -->
      <ion-item>
        <ion-label position="stacked">Note</ion-label>
        <div class="stars-container">
          <ion-button
            *ngFor="let s of [1, 2, 3, 4, 5]"
            fill="clear"
            size="small"
            (click)="setRating(s)">
            <ion-icon
              [name]="spotForm.get('rating')?.value >= s ? 'star' : 'star-outline'"
              [color]="spotForm.get('rating')?.value >= s ? 'warning' : 'medium'">
            </ion-icon>
          </ion-button>
        </div>
      </ion-item>

      <!-- Prix -->
      <ion-item>
        <ion-label position="stacked">Prix (€)</ion-label>
        <ion-input
          type="number"
          formControlName="price"
          placeholder="0">
        </ion-input>
      </ion-item>

      <!-- Services -->
      <div class="services-section">
        <ion-label class="section-label">Services</ion-label>
        <ion-grid class="services-grid">
          <ion-row>
            <ion-col
              size="4"
              size-md="2"
              *ngFor="let service of allServices">
              <div
                class="service-item"
                [class.selected]="isServiceSelected(service.id)"
                (click)="toggleService(service.id)">
                <ion-icon [name]="service.icon"></ion-icon>
                <p>{{ service.label }}</p>
              </div>
            </ion-col>
          </ion-row>
        </ion-grid>
      </div>

      <!-- Bouton de soumission -->
      <div class="submit-section">
        <ion-button
          expand="block"
          type="submit"
          [disabled]="spotForm.invalid">
          Publier le spot
        </ion-button>
      </div>
    </form>
  </div>
</ion-content>
